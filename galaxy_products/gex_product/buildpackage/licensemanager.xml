<project>
    <shortName>licensemanager</shortName>
    <fullName>Galaxy License Manager</fullName>
    <version>${env(BUILD)}</version>
    <installerFilename>${project.vendor}-${product_shortname}-${env(VERSION)}-${env(GROUP)}.${platform_exec_suffix}</installerFilename>
    <readmeFile>readme/readme.txt</readmeFile>
    <licenseFile>../bin/help/pages/license.txt</licenseFile>
    <htmlLicenseFile>../bin/pages/license.htm</htmlLicenseFile>
    <leftImage>install-logo.png</leftImage>
    <logoImage>install-icon.png</logoImage>
    <splashImage>install-splash.png</splashImage>
    <componentList>
        <componentGroup>
            <name>licensemanager</name>
            <description>Galaxy License Manager</description>
            <canBeEdited>0</canBeEdited>
            <selected>1</selected>
            <show>1</show>
            <componentList>
                <component>
                    <name>gexlm</name>
                    <description>License Manager</description>
                    <canBeEdited>1</canBeEdited>
                    <selected>1</selected>
                    <show>1</show>
                    <folderList>
                        <folder>
                            <description>root</description>
                            <destination>${installdir}</destination>
                            <name>rootnix</name>
                            <platforms>linux linux-x64 solaris-sparc osx</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <origin>unix/gex-lm</origin>
                                </distributionFile>
                                <distributionFile>
                                    <origin>unix/gex-lmd</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                        <folder>
                            <description>bin</description>
                            <destination>${installdir}/bin</destination>
                            <name>binnix</name>
                            <platforms>linux linux-x64 solaris-sparc osx</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <allowWildcards>1</allowWildcards>
                                    <origin>../bin/{gex-lm,gex-lm.app}</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                        <folder>
                            <description>bin</description>
                            <destination>${installdir}</destination>
                            <name>binwin</name>
                            <platforms>windows</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <origin>../bin/gex-lm.exe</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                    </folderList>
                    <startMenuShortcutList>
                        <startMenuShortcut>
                            <comment></comment>
                            <name>License Manager</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/gex-lm.exe</windowsExec>
                            <windowsExecArgs>-style fusion</windowsExecArgs>
                            <windowsIcon>${installdir}/gex_lm.ico</windowsIcon>
                            <windowsPath>${installdir}</windowsPath>
                        </startMenuShortcut>
                    </startMenuShortcutList>
                </component>
                <component>
                    <name>gexls</name>
                    <description>License Status</description>
                    <canBeEdited>1</canBeEdited>
                    <selected>1</selected>
                    <show>1</show>
                    <folderList>
                        <folder>
                            <description>root</description>
                            <destination>${installdir}</destination>
                            <name>rootnix</name>
                            <platforms>linux linux-x64 solaris-sparc osx</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <origin>unix/gex-ls</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                        <folder>
                            <description>bin</description>
                            <destination>${installdir}/bin</destination>
                            <name>binnix</name>
                            <platforms>linux linux-x64 solaris-sparc osx</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <allowWildcards>1</allowWildcards>
                                    <origin>../bin/{gex-ls,gex-ls.app}</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                        <folder>
                            <description>bin</description>
                            <destination>${installdir}</destination>
                            <name>binwin</name>
                            <platforms>windows</platforms>
                            <distributionFileList>
                                <distributionFile>
                                    <origin>../bin/gex-ls.exe</origin>
                                </distributionFile>
                            </distributionFileList>
                        </folder>
                    </folderList>
                    <startMenuShortcutList>
                        <startMenuShortcut>
                            <comment></comment>
                            <name>License Status</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/gex-ls.exe</windowsExec>
                            <windowsExecArgs>-style fusion</windowsExecArgs>
                            <windowsIcon>${installdir}/gex_lm.ico</windowsIcon>
                            <windowsPath>${installdir}</windowsPath>
                        </startMenuShortcut>
                    </startMenuShortcutList>
                </component>
                <component>
                    <name>validatorComponent</name>
                    <description>validator</description>
                    <canBeEdited>1</canBeEdited>
                    <selected>1</selected>
                    <show>0</show>
                    <componentSelectionValidationActionList>
                        <throwError>
                            <text>You have to select at least one component.</text>
                            <ruleList>
                                <componentTest logic="not_selected" name="gexlm"/>
                                <componentTest logic="not_selected" name="gexls"/>
                            </ruleList>
                        </throwError>
                    </componentSelectionValidationActionList>
                </component>
            </componentList>
            <folderList>
                <folder>
                    <description>root</description>
                    <destination>${installdir}</destination>
                    <name>root</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>readme/readme.txt</origin>
                        </distributionFile>
                        <distributionDirectory>
                            <origin>../bin/html</origin>
                        </distributionDirectory>
                        <distributionDirectory>
                            <origin>../bin/images</origin>
                        </distributionDirectory>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>bin</description>
                    <destination>${installdir}/bin</destination>
                    <name>binnix</name>
                    <platforms>linux linux-x64 solaris-sparc osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>unix/common.sh</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>bin</description>
                    <destination>${installdir}</destination>
                    <name>binwin</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../gex-lm/sources/gex_lm.ico</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>lib</description>
                    <destination>${installdir}/lib</destination>
                    <name>libnix</name>
                    <platforms>linux linux-x64 solaris-sparc osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/lib/libQt5DBus.so*</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/lib/libQt5Core.{so*,*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/lib/libQt5Gui.{so*,*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/lib/libQt5Network.{so*,*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/lib/libQt5Widgets.{so*,*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libicudata.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-util.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-icccm.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-xfixes.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-sync.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-randr.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-keysyms.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-image.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-dpms.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-render-util.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-render.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-shm.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libxcb-shape.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-render-util.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-render.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-shm.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-shape.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-util.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-icccm.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-xfixes.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-sync.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-randr.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-keysyms.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-image.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/opt/X11/lib/libxcb-dpms.{*dylib}</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>lib</description>
                    <destination>${installdir}/lib</destination>
                    <name>liblinux32</name>
                    <platforms>linux</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libgfortran.{so.1*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libreadline.{so.5*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/lib/libtermcap.{so.2*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libicuuc.{so.52*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libicui18n.{so.52*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libgomp.{so.1*}</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>lib</description>
                    <destination>${installdir}/lib</destination>
                    <name>liblinux64</name>
                    <platforms>linux-x64</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib64/libgfortran.{so.1*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib64/libreadline.{so.5*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/lib64/libtermcap.{so.2*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libicuuc.{so.52*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib/libicui18n.{so.52*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>/usr/lib64/libgomp.{so.1*}</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>lib</description>
                    <destination>${installdir}</destination>
                    <name>libwin</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>${env(QTDIR)}/lib/Qt5Gui.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${env(QTDIR)}/lib/Qt5Network.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${env(QTDIR)}/lib/Qt5Core.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${env(QTDIR)}/lib/Qt5Widgets.dll</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>libplatformsnix</description>
                    <destination>${installdir}/platforms</destination>
                    <name>libplatformsnix</name>
                    <platforms>linux linux-x64 solaris-sparc osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/plugins/platforms/libqlinuxfb.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/plugins/platforms/libqxcb.{so*}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/plugins/platforms/libqcocoa.{*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/plugins/platforms/libqminimal.{so*,*dylib}</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>${env(QTDIR)}/plugins/platforms/libqoffscreen.{so*,*dylib}</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>libplatformswin</description>
                    <destination>${installdir}/platforms</destination>
                    <name>libplatformswin</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>${env(QTDIR)}/plugins/platforms/qminimal.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${env(QTDIR)}/plugins/platforms/qoffscreen.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${env(QTDIR)}/plugins/platforms/qwindows.dll</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>libwin32</description>
                    <destination>${installdir}</destination>
                    <name>libwin32</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>c:/MinGW/bin/mingwm10.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>c:/MinGW/bin/libgcc_s_dw2-1.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>c:/MinGW/bin/libwinpthread*-1.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <allowWildcards>1</allowWildcards>
                            <origin>c:/MinGW/bin/libstdc++*-6.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>c:/icu/dist/lib/icuin52.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>c:/icu/dist/lib/icuuc52.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>c:/icu/dist/lib/icudt52.dll</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
            </folderList>
        </componentGroup>
    </componentList>
    <preBuildActionList>
        <setInstallerVariable>
            <name>project.enableEncryption</name>
            <value>1</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${pw}</text>
                    <value></value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>project.encryptionPassword</name>
            <value>${pw}</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${pw}</text>
                    <value></value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
    </preBuildActionList>
    <initializationActionList>
        <registryGet>
            <key>HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}-${arch}</key>
            <name>Location</name>
            <variable>installdir</variable>
        </registryGet>
    </initializationActionList>
    <postInstallationActionList>
        <registrySet>
            <key>HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}-${arch}</key>
            <name>Location</name>
            <type>REG_SZ</type>
            <value>${installdir}</value>
        </registrySet>
    </postInstallationActionList>
    <allowComponentSelection>0</allowComponentSelection>
    <enableRollback>0</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <productDisplayIcon>${installdir}/gex_lm.ico</productDisplayIcon>
    <saveRelativePaths>1</saveRelativePaths>
    <vendor>Mentor Graphics</vendor>
    <width>622</width>
    <windows64bitMode>${win64}</windows64bitMode>
    <windowsExecutableIcon>../gex/sources/gex.ico</windowsExecutableIcon>
    <customLanguageFileList>
        <language>
            <code>en</code>
            <file>custom-en.lng</file>
        </language>
    </customLanguageFileList>
    <finalPageActionList>
        <createShortcuts>
            <destination>${windows_folder_desktopdirectory}</destination>
            <progressText>Create a License Manager shortcut on the Desktop</progressText>
            <ruleList>
                <componentTest logic="selected" name="gexlm"/>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
            <shortcutList>
                <shortcut>
                    <comment></comment>
                    <exec></exec>
                    <icon></icon>
                    <name>Galaxy License Manager</name>
                    <path></path>
                    <platforms>all</platforms>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/gex-lm.exe</windowsExec>
                    <windowsExecArgs>-style fusion -gui</windowsExecArgs>
                    <windowsIcon>${installdir}/gex_lm.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </shortcut>
            </shortcutList>
        </createShortcuts>
        <createShortcuts>
            <destination>${windows_folder_desktopdirectory}</destination>
            <progressText>Create a License Status shortcut on the Desktop</progressText>
            <ruleList>
                <componentTest logic="selected" name="gexls"/>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
            <shortcutList>
                <shortcut>
                    <comment></comment>
                    <exec></exec>
                    <icon></icon>
                    <name>Galaxy License Status</name>
                    <path></path>
                    <platforms>all</platforms>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/gex-ls.exe</windowsExec>
                    <windowsExecArgs>-style fusion -gui</windowsExecArgs>
                    <windowsIcon>${installdir}/gex_lm.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </shortcut>
            </shortcutList>
        </createShortcuts>
    </finalPageActionList>
    <parameterList>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${platform_install_prefix}/${project.vendor}-${product_shortname}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <cliOptionName>prefix</cliOptionName>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>40</width>
            <preShowPageActionList>
                <setInstallerVariable>
                    <name>installdir</name>
                    <value>${platform_install_prefix}/${project.fullName}</value>
                    <ruleList>
                        <platformTest>
                            <type>windows</type>
                        </platformTest>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform_install_prefix}/${project.vendor}-${product_shortname}</text>
                            <value>${installdir}</value>
                        </compareText>
                    </ruleList>
                </setInstallerVariable>
            </preShowPageActionList>
        </directoryParameter>
        <stringParameter name="arch" value="x32" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>30</width>
        </stringParameter>
        <stringParameter name="win64" value="1" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>30</width>
        </stringParameter>
        <stringParameter ask="0">
            <name>pw</name>
            <description></description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>30</width>
        </stringParameter>
    </parameterList>
</project>

